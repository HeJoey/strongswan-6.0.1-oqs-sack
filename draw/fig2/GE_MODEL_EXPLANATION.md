# GEæ¨¡å‹å‚æ•°è®¾ç½®è¯¦è§£

## ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦Pythonè®¡ç®—å™¨ï¼Ÿ

### é—®é¢˜èƒŒæ™¯
GEæ¨¡å‹æœ‰**ä¸¤å¥—å‚æ•°ç³»ç»Ÿ**ï¼š

1. **ç›´è§‚å‚æ•°** (æˆ‘ä»¬æƒ³è¦çš„)ï¼š
   - é”™è¯¯ç‡ (0-100%)
   - çªå‘é•¿åº¦ (å¹³å‡è¿ç»­ä¸¢åŒ…æ•°)
   - åçŠ¶æ€æ—¶é—´æ¯”ä¾‹ (0-100%)

2. **åº•å±‚å‚æ•°** (Linux tcéœ€è¦çš„)ï¼š
   - p: å¥½çŠ¶æ€åˆ°åçŠ¶æ€çš„æ¦‚ç‡
   - r: åçŠ¶æ€åˆ°å¥½çŠ¶æ€çš„æ¦‚ç‡  
   - h: åçŠ¶æ€æ— é”™è¯¯æ¦‚ç‡
   - k: å¥½çŠ¶æ€é”™è¯¯æ¦‚ç‡

### ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥è®¾ç½®ï¼Ÿ
```bash
# âŒ è¿™æ ·æ˜¯ä¸è¡Œçš„ï¼
tc qdisc add dev ens33 root netem loss random 5% çªå‘é•¿åº¦5 åçŠ¶æ€æ—¶é—´40%

# âœ… å¿…é¡»è¿™æ ·ï¼
tc qdisc add dev ens33 root netem loss random 5.71% 8.57% 12.50%
```

## ğŸ“Š å‚æ•°æ˜ å°„å…³ç³»

### ä¸‰å‚æ•°æ¨¡å‹æ˜ å°„
```
è¾“å…¥å‚æ•° â†’ è®¡ç®— â†’ è¾“å‡ºå‚æ•°
é”™è¯¯ç‡(35%) + çªå‘é•¿åº¦(5) + åçŠ¶æ€æ—¶é—´(40%) 
    â†“
p=5.71% + r=8.57% + h=12.50%
```

### æ•°å­¦å…³ç³»
```
é”™è¯¯ç‡ = (p * h) / (p + r)
çªå‘é•¿åº¦ = 1 / r
åçŠ¶æ€æ—¶é—´ = p / (p + r)
```

## ğŸ¯ Xè½´é‡åŒ–æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: ä½¿ç”¨é”™è¯¯ç‡ä½œä¸ºXè½´ (æ¨è)
```python
# Xè½´: é”™è¯¯ç‡ (0%, 2%, 5%, 8%, 10%, 12%, 15%, 18%, 20%)
# Yè½´: HCT (æ¯«ç§’)

x_values = [0, 2, 5, 8, 10, 12, 15, 18, 20]  # é”™è¯¯ç‡%
y_values = [hct_0, hct_2, hct_5, hct_8, hct_10, hct_12, hct_15, hct_18, hct_20]
```

### æ–¹æ¡ˆ2: ä½¿ç”¨GEæ¨¡å‹å‚æ•°ä½œä¸ºXè½´
```python
# Xè½´: på€¼ (åº•å±‚å‚æ•°)
# Yè½´: HCT (æ¯«ç§’)

x_values = [p_0, p_2, p_5, p_8, p_10, p_12, p_15, p_18, p_20]
y_values = [hct_0, hct_2, hct_5, hct_8, hct_10, hct_12, hct_15, hct_18, hct_20]
```

## ğŸ”§ å®é™…ä½¿ç”¨æµç¨‹

### æ­¥éª¤1: ç¡®å®šæµ‹è¯•å‚æ•°
```bash
# æˆ‘ä»¬æƒ³è¦æµ‹è¯•è¿™äº›é”™è¯¯ç‡
é”™è¯¯ç‡åˆ—è¡¨ = [0%, 2%, 5%, 8%, 10%, 12%, 15%, 18%, 20%]
çªå‘é•¿åº¦ = 5 (å›ºå®š)
åçŠ¶æ€æ—¶é—´ = 40% (å›ºå®š)
```

### æ­¥éª¤2: è®¡ç®—GEå‚æ•°
```bash
# å¯¹æ¯ä¸ªé”™è¯¯ç‡è®¡ç®—å¯¹åº”çš„GEå‚æ•°
./ge_parameter_calculator.py --model 3param --error-rate 0.02 --burst-length 5 --bad-state-time 0.4 --tc-command
./ge_parameter_calculator.py --model 3param --error-rate 0.05 --burst-length 5 --bad-state-time 0.4 --tc-command
./ge_parameter_calculator.py --model 3param --error-rate 0.08 --burst-length 5 --bad-state-time 0.4 --tc-command
# ... ç»§ç»­å…¶ä»–é”™è¯¯ç‡
```

### æ­¥éª¤3: è®¾ç½®ç½‘ç»œæ¡ä»¶
```bash
# ä½¿ç”¨è®¡ç®—å‡ºçš„å‚æ•°è®¾ç½®ç½‘ç»œ
sudo tc qdisc add dev ens33 root netem loss random 2.86% 4.29% 6.25%  # 2%é”™è¯¯ç‡
sudo tc qdisc add dev ens33 root netem loss random 7.14% 10.71% 15.63% # 5%é”™è¯¯ç‡
sudo tc qdisc add dev ens33 root netem loss random 11.43% 17.14% 25.00% # 8%é”™è¯¯ç‡
# ... ç»§ç»­å…¶ä»–å‚æ•°
```

### æ­¥éª¤4: æ”¶é›†æ•°æ®
```bash
# æ”¶é›†æ€§èƒ½æ•°æ®ï¼ŒXè½´ä½¿ç”¨é”™è¯¯ç‡
sudo ./connection_test.sh -l "2" -n 50 -o test_2percent.csv
sudo ./connection_test.sh -l "5" -n 50 -o test_5percent.csv
sudo ./connection_test.sh -l "8" -n 50 -o test_8percent.csv
# ... ç»§ç»­å…¶ä»–æµ‹è¯•
```

## ğŸ“ˆ ç»˜å›¾æ•°æ®æ ¼å¼

### CSVæ–‡ä»¶æ ¼å¼
```csv
é”™è¯¯ç‡(%),æµ‹è¯•åºå·,ç»“æœ,HCT(ms),é‡ä¼ æ¬¡æ•°
0,1,success,150,0
0,2,success,145,0
...
2,1,success,160,1
2,2,failed,0,3
...
```

### ç»˜å›¾ä»£ç ç¤ºä¾‹
```python
import pandas as pd
import matplotlib.pyplot as plt

# è¯»å–æ•°æ®
data = pd.read_csv('test_results.csv')

# æŒ‰é”™è¯¯ç‡åˆ†ç»„è®¡ç®—å¹³å‡HCT
avg_hct = data.groupby('é”™è¯¯ç‡(%)')['HCT(ms)'].mean()

# ç»˜åˆ¶æ€§èƒ½æ›²çº¿
plt.figure(figsize=(10, 6))
plt.plot(avg_hct.index, avg_hct.values, 'bo-', linewidth=2, markersize=8)
plt.xlabel('é”™è¯¯ç‡ (%)')
plt.ylabel('å¹³å‡HCT (ms)')
plt.title('IPsecæ€§èƒ½ vs ç½‘ç»œé”™è¯¯ç‡')
plt.grid(True)
plt.show()
```

## ğŸ¯ æ¨èçš„æµ‹è¯•å‚æ•°

### åŸºç¡€æ€§èƒ½æµ‹è¯•
```bash
é”™è¯¯ç‡: [0, 2, 5, 8, 10, 12, 15, 18, 20]
çªå‘é•¿åº¦: 5 (å›ºå®š)
åçŠ¶æ€æ—¶é—´: 0.4 (å›ºå®š)
æ¯ä¸ªé…ç½®æµ‹è¯•æ¬¡æ•°: 50
```

### æ‹ç‚¹ç²¾ç¡®å®šä½
```bash
é”™è¯¯ç‡: [8, 8.5, 9, 9.5, 10, 10.5, 11, 11.5, 12]
çªå‘é•¿åº¦: 5 (å›ºå®š)
åçŠ¶æ€æ—¶é—´: 0.4 (å›ºå®š)
æ¯ä¸ªé…ç½®æµ‹è¯•æ¬¡æ•°: 100
```

## ğŸ” å‚æ•°éªŒè¯

### éªŒè¯GEå‚æ•°æ˜¯å¦æ­£ç¡®
```bash
# è®¾ç½®ç½‘ç»œæ¡ä»¶
sudo tc qdisc add dev ens33 root netem loss random 5.71% 8.57% 12.50%

# éªŒè¯å®é™…é”™è¯¯ç‡
ping -c 1000 192.168.31.136 | grep -o "packet loss" | wc -l
# åº”è¯¥æ¥è¿‘35%çš„é”™è¯¯ç‡
```

### æŸ¥çœ‹å½“å‰ç½‘ç»œè®¾ç½®
```bash
# æŸ¥çœ‹å½“å‰tcè§„åˆ™
sudo tc qdisc show dev ens33

# æ¸…é™¤ç½‘ç»œè®¾ç½®
sudo tc qdisc del dev ens33 root
```

## ğŸ’¡ æ€»ç»“

1. **Pythonè®¡ç®—å™¨çš„ä½œç”¨**: å°†ç›´è§‚çš„é”™è¯¯ç‡è½¬æ¢ä¸ºLinux tcéœ€è¦çš„åº•å±‚å‚æ•°
2. **Xè½´é‡åŒ–**: ä½¿ç”¨é”™è¯¯ç‡ä½œä¸ºXè½´ï¼Œè¿™æ˜¯æœ€ç›´è§‚å’Œæœ‰æ„ä¹‰çš„æ–¹å¼
3. **å·¥ä½œæµç¨‹**: ç¡®å®šé”™è¯¯ç‡ â†’ è®¡ç®—GEå‚æ•° â†’ è®¾ç½®ç½‘ç»œ â†’ æ”¶é›†æ•°æ® â†’ ç»˜å›¾åˆ†æ
4. **æ•°æ®æ ¼å¼**: CSVæ–‡ä»¶åŒ…å«é”™è¯¯ç‡ã€æµ‹è¯•ç»“æœã€HCTç­‰å…³é”®ä¿¡æ¯

è¿™æ ·å°±èƒ½å‡†ç¡®åœ°å°†GEæ¨¡å‹çš„å‚æ•°é‡åŒ–åˆ°Xè½´ï¼Œç”¨äºç»˜åˆ¶æ€§èƒ½æ›²çº¿å’Œè¯†åˆ«æ‹ç‚¹ï¼ 